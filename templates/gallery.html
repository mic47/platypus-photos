<div>
  {% if input.page > 0 %}<a href="#" class="prev-url">Prev Page</a>{% else %}Prev Page{% endif %}
  {% if has_next_page %}<a href="#" class="next-url">Next Page</a>{% else %}Next Page{% endif %}
</div>
{% for image in images %}
  {% if loop.index0 == oi %}
  <div class="gallery_item overlay">
  {% else %}
  <div class="gallery_item">
  {% endif %}
    <span id="i{{loop.index0}}"></span>
    <div class="gallery_item_fs">
        {% if loop.index0 == 0 %}
        {% if input.page > 0 %}<a onclick="prev_page()" href="#}">prev</a>{% else %} prev {% endif %}
        {% else %}
        <a href="#i{{ loop.index0}}" onclick="overlay_prev(this, {{ loop.index0 }})">prev</a>
        {% endif %}
        <a href="#i{{ loop.index0}}" onclick="overlay_close(this)">close</a>
        {% if loop.index == images|length %}
        {% if has_next_page %}<a onclick="next_page()" href="#">next</a>{% else %} next {% endif %}
        {% else %}
        <a href="#i{{ loop.index0}}" onclick="overlay_next(this, {{ loop.index0 }})">next</a>
        {% endif %}
    </div>
    {% if image.timeicon %}
        <a href="#" onclick='update_url({"tsfrom":{{image.timestamp}}-0.01})'>⬅️ from</a>
        {{image.timeicon}}
        <a href="#" onclick='update_url({"tsto":{{image.timestamp}}+0.01})'>to ➡️</a>
    {% endif %}
    <div class="gallery_container" onclick="overlay(this, {{ loop.index0 }})">
    <img loading="lazy" src="/img?hsh={{image.hsh}}&size={% if loop.index0 == oi %}original{%else%}preview{%endif%}" class="gallery_image"/>
    </div>
    {{ image.classifications}} <br/>
    {% for tag in image.tags %}
    <span class="tag"><a onclick='update_url_add_tag("{{tag[0]|safe}}")' href="#">{{tag[1]}}{{tag[0]}}</a></span>
    {% endfor %}

    {% for address in image.addrs %}
    <span class="location"><a onclick='update_url({"addr": "{{address|safe}}"})' href="#">{{ address }}</a></span>
    {% endfor %}
    {% if image.date %}
    <span class="date"><a onclick='update_url({"tsfrom": "{{image.date_timestamp_start}}", "tsto": "{{image.date_timestamp_end}}"})' href="#">{{image.date}}</a></span>
    {% endif %}
    {% for path in image.paths %}
    <span class="dir"><a onclick='update_dir("{{path.dir|safe}}")' href="#">{{path.dir}}</a></span>
    <div class="gallery_item_fs overflow">
    {% for raw in image.raw_data %}
      <span class="raw">{{ raw.k }}: {{raw.v}}</span>
    {% endfor %}
    </div>
    {% endfor %}
  </div>
{% endfor %}
</div>
<br>
<div style="float: left; background: #CCCCCC; height: 10em;">
  {% if input.page > 0 %}<a href="#" class="prev-url">Prev Page</a>{% else %}Prev Page{% endif %}
  {% if has_next_page %}<a href="#" class="next-url">Next Page</a>{% else %}Next Page{% endif %}
</div>
